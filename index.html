<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kingdom Defense Pro - Juego de Estrategia Mejorado</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Arial', sans-serif;
        }
        
        body {
            background: linear-gradient(135deg, #0a192f, #1a365d);
            color: white;
            min-height: 100vh;
            overflow-x: hidden;
        }
        
        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        
        header {
            text-align: center;
            padding: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            margin-bottom: 20px;
            border: 2px solid #00d4ff;
            box-shadow: 0 0 20px rgba(0, 212, 255, 0.3);
        }
        
        h1 {
            color: #00d4ff;
            font-size: 2.8rem;
            margin-bottom: 10px;
            text-shadow: 0 0 15px rgba(0, 212, 255, 0.7);
        }
        
        .game-area {
            display: flex;
            flex-wrap: wrap;
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .game-board {
            flex: 3;
            min-width: 300px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #00d4ff;
            position: relative;
        }
        
        .game-info {
            flex: 1;
            min-width: 250px;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 20px;
            border: 2px solid #ff6b00;
        }
        
        #gameCanvas {
            width: 100%;
            height: 600px;
            background: #0f3460;
            border-radius: 10px;
            border: 2px solid #00d4ff;
            display: block;
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.2);
            cursor: crosshair;
        }
        
        .grid-overlay {
            position: absolute;
            top: 20px;
            left: 20px;
            right: 20px;
            bottom: 20px;
            pointer-events: none;
        }
        
        .grid-cell {
            position: absolute;
            border: 1px dashed rgba(255, 255, 255, 0.2);
            background: rgba(255, 255, 255, 0.05);
        }
        
        .buildable {
            background: rgba(0, 255, 0, 0.3) !important;
            border: 2px solid rgba(0, 255, 0, 0.6) !important;
            cursor: pointer !important;
            transition: all 0.3s;
            pointer-events: auto !important;
            z-index: 10;
        }
        
        .buildable:hover {
            background: rgba(0, 255, 0, 0.5) !important;
            box-shadow: 0 0 15px rgba(0, 255, 0, 0.5);
        }
        
        .path-cell {
            background: rgba(139, 69, 19, 0.5) !important;
            border: 2px solid rgba(160, 82, 45, 0.8) !important;
        }
        
        .stats {
            display: flex;
            justify-content: space-between;
            margin-bottom: 20px;
            background: rgba(255, 107, 0, 0.1);
            padding: 15px;
            border-radius: 10px;
            border: 1px solid rgba(255, 107, 0, 0.3);
        }
        
        .stat-item {
            text-align: center;
            padding: 0 10px;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 2rem;
            font-weight: bold;
            color: #ff6b00;
            text-shadow: 0 0 10px rgba(255, 107, 0, 0.5);
        }
        
        .controls {
            display: flex;
            gap: 10px;
            margin: 20px 0;
            flex-wrap: wrap;
        }
        
        .btn {
            background: linear-gradient(45deg, #00d4ff, #0099ff);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 1rem;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s;
            display: inline-flex;
            align-items: center;
            gap: 8px;
            flex: 1;
            min-width: 150px;
            justify-content: center;
        }
        
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 212, 255, 0.4);
        }
        
        .btn:active {
            transform: translateY(0);
        }
        
        .btn-premium {
            background: linear-gradient(45deg, #ff6b00, #ff3d00);
        }
        
        .btn-premium:hover {
            box-shadow: 0 5px 15px rgba(255, 107, 0, 0.4);
        }
        
        .towers {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 10px;
            margin: 20px 0;
        }
        
        .tower-card {
            background: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
            border: 2px solid transparent;
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        
        .tower-card:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-3px);
        }
        
        .tower-card.selected {
            border-color: #00d4ff;
            background: rgba(0, 212, 255, 0.1);
            box-shadow: 0 0 15px rgba(0, 212, 255, 0.3);
        }
        
        .tower-icon {
            font-size: 2.5rem;
            margin-bottom: 10px;
            filter: drop-shadow(0 0 5px rgba(255, 255, 255, 0.5));
        }
        
        .tower-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #00d4ff;
        }
        
        .tower-cost {
            color: #ffd700;
            font-weight: bold;
            font-size: 1.2rem;
            margin: 5px 0;
        }
        
        .tower-stats {
            font-size: 0.8rem;
            color: #aaa;
            margin-top: 5px;
        }
        
        .shop {
            background: rgba(0, 0, 0, 0.4);
            padding: 20px;
            border-radius: 15px;
            margin-top: 20px;
            border: 2px solid #9d4edd;
        }
        
        .shop-items {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(150px, 1fr));
            gap: 10px;
            margin-top: 15px;
        }
        
        .shop-item {
            background: rgba(157, 78, 221, 0.2);
            padding: 15px;
            border-radius: 10px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }
        
        .shop-item:hover {
            background: rgba(157, 78, 221, 0.3);
            transform: translateY(-2px);
        }
        
        .instructions {
            background: rgba(255, 255, 255, 0.05);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            border-left: 4px solid #00d4ff;
        }
        
        .enemy-info {
            display: flex;
            align-items: center;
            gap: 10px;
            margin: 10px 0;
            padding: 10px;
            background: rgba(255, 0, 0, 0.1);
            border-radius: 5px;
        }
        
        .enemy-icon {
            font-size: 1.5rem;
        }
        
        .wave-info {
            background: rgba(0, 212, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: center;
        }
        
        .wave-progress {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            margin: 10px 0;
            overflow: hidden;
        }
        
        .wave-progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #00d4ff, #0099ff);
            width: 0%;
            transition: width 0.3s;
        }
        
        .game-over {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        
        .game-over-content {
            background: linear-gradient(135deg, #0f3460, #1a365d);
            padding: 40px;
            border-radius: 20px;
            text-align: center;
            border: 3px solid #00d4ff;
            max-width: 500px;
            width: 90%;
            box-shadow: 0 0 30px rgba(0, 212, 255, 0.5);
        }
        
        @media (max-width: 768px) {
            .game-area {
                flex-direction: column;
            }
            
            .towers {
                grid-template-columns: repeat(2, 1fr);
            }
            
            .btn {
                min-width: 100%;
            }
        }
        
        .build-hint {
            position: absolute;
            background: rgba(0, 0, 0, 0.8);
            color: white;
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #00d4ff;
            display: none;
            z-index: 100;
            pointer-events: none;
        }
        
        .tower-range {
            position: absolute;
            border: 1px dashed rgba(0, 212, 255, 0.5);
            border-radius: 50%;
            pointer-events: none;
            display: none;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè∞ KINGDOM DEFENSE PRO</h1>
            <p>Juego de Estrategia Mejorado - Defiende tu reino con t√°ctica</p>
        </header>
        
        <div class="stats">
            <div class="stat-item">
                <div class="stat-label">üí∞ ORO</div>
                <div class="stat-value" id="gold">1000</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">‚öîÔ∏è OLEADA</div>
                <div class="stat-value" id="wave">1</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">‚ù§Ô∏è VIDAS</div>
                <div class="stat-value" id="lives">30</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">üéØ PUNTOS</div>
                <div class="stat-value" id="points">0</div>
            </div>
            <div class="stat-item">
                <div class="stat-label">üíé GEMAS</div>
                <div class="stat-value" id="gems">50</div>
            </div>
        </div>
        
        <div class="game-area">
            <div class="game-board">
                <canvas id="gameCanvas" width="800" height="600"></canvas>
                <div class="grid-overlay" id="gridOverlay"></div>
                <div class="build-hint" id="buildHint"></div>
                
                <div class="controls">
                    <button class="btn" id="startWave">
                        <span>‚ñ∂Ô∏è</span> Iniciar Oleada (1-10)
                    </button>
                    <button class="btn" id="upgradeAll">
                        <span>‚ö°</span> Mejorar Todas (200 oro)
                    </button>
                    <button class="btn" id="sellTower">
                        <span>üí∞</span> Vender Torre (75%)
                    </button>
                    <button class="btn btn-premium" id="specialPower">
                        <span>‚ú®</span> Poder Especial (10 gemas)
                    </button>
                </div>
                
                <div class="wave-info">
                    <h3>üìä Progreso de Oleada</h3>
                    <div class="wave-progress">
                        <div class="wave-progress-bar" id="waveProgress"></div>
                    </div>
                    <p id="waveStatus">Selecciona una torre y haz clic en una zona verde para construir</p>
                </div>
            </div>
            
            <div class="game-info">
                <h2 style="color: #00d4ff; margin-bottom: 15px;">üèóÔ∏è CONSTRUIR TORRES</h2>
                <p style="color: #aaa; margin-bottom: 15px;">Selecciona una torre y haz clic en una casilla verde para construir</p>
                
                <div class="towers">
                    <div class="tower-card" data-tower="archer" data-cost="150">
                        <div class="tower-icon">üèπ</div>
                        <div class="tower-name">Arquero √âlite</div>
                        <div class="tower-cost">150 ü™ô</div>
                        <div class="tower-stats">üéØ Da√±o: 25 ‚ö° Vel: R√°pida</div>
                    </div>
                    
                    <div class="tower-card" data-tower="mage" data-cost="300">
                        <div class="tower-icon">üîÆ</div>
                        <div class="tower-name">Mago Arcano</div>
                        <div class="tower-cost">300 ü™ô</div>
                        <div class="tower-stats">üéØ Da√±o: 40 ‚ö° Vel: Media</div>
                    </div>
                    
                    <div class="tower-card" data-tower="cannon" data-cost="400">
                        <div class="tower-icon">üí£</div>
                        <div class="tower-name">Ca√±√≥n Pesado</div>
                        <div class="tower-cost">400 ü™ô</div>
                        <div class="tower-stats">üéØ Da√±o: 65 ‚ö° Vel: Lenta</div>
                    </div>
                    
                    <div class="tower-card" data-tower="ice" data-cost="250">
                        <div class="tower-icon">‚ùÑÔ∏è</div>
                        <div class="tower-name">Torre Glacial</div>
                        <div class="tower-cost">250 ü™ô</div>
                        <div class="tower-stats">üéØ Da√±o: 15 ‚ö° Ralentiza</div>
                    </div>
                </div>
                
                <div class="instructions">
                    <h3 style="color: #ff6b00; margin-bottom: 10px;">üéÆ C√ìMO JUGAR</h3>
                    <ul style="list-style: none; padding-left: 0;">
                        <li style="margin-bottom: 8px;">‚úÖ <strong>Casillas verdes</strong> = Zonas para construir</li>
                        <li style="margin-bottom: 8px;">‚úÖ Cada torre tiene <strong>estad√≠sticas √∫nicas</strong></li>
                        <li style="margin-bottom: 8px;">‚úÖ Los enemigos siguen el <strong>camino marr√≥n</strong></li>
                        <li style="margin-bottom: 8px;">‚úÖ <strong>Mejora torres</strong> para m√°s da√±o</li>
                        <li style="margin-bottom: 8px;">‚úÖ Sobrevive a <strong>10 oleadas</strong> para ganar</li>
                    </ul>
                </div>
                
                <div class="enemy-info">
                    <div class="enemy-icon">üëπ</div>
                    <div>
                        <div><strong>Enemigos Activos:</strong> <span id="enemyCount">0</span></div>
                        <div><strong>Siguiente oleada en:</strong> <span id="nextWaveTimer">--</span>s</div>
                    </div>
                </div>
                
                <div class="shop">
                    <h2 style="color: #9d4edd; margin-bottom: 15px;">üõí TIENDA PREMIUM</h2>
                    
                    <div class="shop-items">
                        <div class="shop-item" id="buyGold">
                            <div style="font-size: 1.8rem; color: #ffd700;">ü™ô</div>
                            <div>+500 Oro</div>
                            <div style="margin: 8px 0; color: #9d4edd;">5 üíé</div>
                        </div>
                        
                        <div class="shop-item" id="buyLives">
                            <div style="font-size: 1.8rem; color: #ff4444;">‚ù§Ô∏è</div>
                            <div>+10 Vidas</div>
                            <div style="margin: 8px 0; color: #9d4edd;">8 üíé</div>
                        </div>
                        
                        <div class="shop-item" id="buyDamage">
                            <div style="font-size: 1.8rem; color: #00d4ff;">‚ö°</div>
                            <div>x2 Da√±o 30s</div>
                            <div style="margin: 8px 0; color: #9d4edd;">15 üíé</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div style="text-align: center; margin-top: 30px; padding: 20px; background: rgba(0,0,0,0.4); border-radius: 10px; border: 1px solid rgba(255,255,255,0.1);">
            <p>üéÆ <strong>Juego de estrategia mejorado</strong> - Balance perfecto - Gr√°ficos optimizados</p>
            <p style="font-size: 0.9rem; margin-top: 10px; color: #aaa;">Las compras son opcionales. Juego 100% legal sin apuestas.</p>
        </div>
    </div>
    
    <!-- Pantalla de Game Over -->
    <div class="game-over" id="gameOver">
        <div class="game-over-content">
            <h2 id="gameOverTitle" style="color: #00d4ff; margin-bottom: 20px;">üèÜ ¬°VICTORIA!</h2>
            <div id="victoryIcon" style="font-size: 5rem; margin: 20px 0;">üëë</div>
            <p id="gameOverMessage" style="margin-bottom: 20px;">Has completado todas las oleadas</p>
            
            <div style="background: rgba(255,255,255,0.1); padding: 20px; border-radius: 10px; margin: 20px 0;">
                <div style="font-size: 2.5rem; color: #ffd700; margin: 10px 0;" id="finalScore">0 Puntos</div>
                <div style="display: flex; justify-content: space-around; margin: 20px 0;">
                    <div>
                        <div style="color: #aaa;">Oleadas</div>
                        <div style="color: #00d4ff; font-size: 1.5rem;" id="finalWaves">0</div>
                    </div>
                    <div>
                        <div style="color: #aaa">Torres</div>
                        <div style="color: #00d4ff; font-size: 1.5rem;" id="finalTowers">0</div>
                    </div>
                    <div>
                        <div style="color: #aaa">Enemigos</div>
                        <div style="color: #00d4ff; font-size: 1.5rem;" id="finalEnemies">0</div>
                    </div>
                </div>
            </div>
            
            <div style="margin: 30px 0;">
                <button class="btn" id="playAgain" style="margin: 5px;">
                    <span>üîÑ</span> Jugar Otra Vez
                </button>
                <button class="btn btn-premium" id="continueGame" style="margin: 5px;">
                    <span>üöÄ</span> Continuar (Oleadas 11-20)
                </button>
            </div>
            
            <div style="background: rgba(255,255,255,0.05); padding: 15px; border-radius: 10px;">
                <p>¬øQuieres registrar tu r√©cord?</p>
                <button class="btn" id="shareScore" style="width: 100%; margin-top: 10px;">
                    <span>üì§</span> Compartir Puntaje
                </button>
            </div>
        </div>
    </div>

    <script>
        // ============================================
        // CONFIGURACI√ìN MEJORADA DEL JUEGO - TODO CORREGIDO
        // ============================================
        
        // Variables del juego
        let gold = 1000;
        let wave = 1;
        let lives = 30;
        let points = 0;
        let gems = 50;
        let gameRunning = false;
        let selectedTower = null;
        let towers = [];
        let enemies = [];
        let bullets = [];
        let enemyKills = 0;
        let maxWaves = 10;
        let waveTimer = 0;
        let specialPowerActive = false;
        let damageBoostActive = false;
        let damageBoostEndTime = 0;
        let lastTime = 0;
        let enemySpawnInterval = null;
        let enemiesThisWave = 0;
        let enemiesSpawned = 0;
        
        // Estad√≠sticas de torres
        const towerStats = {
            archer: { 
                name: "Arquero √âlite", 
                damage: 25, 
                range: 120, 
                fireRate: 800, 
                cost: 150,
                color: '#00ff88',
                icon: 'üèπ'
            },
            mage: { 
                name: "Mago Arcano", 
                damage: 40, 
                range: 150, 
                fireRate: 1200, 
                cost: 300,
                color: '#ff00ff',
                icon: 'üîÆ'
            },
            cannon: { 
                name: "Ca√±√≥n Pesado", 
                damage: 65, 
                range: 100, 
                fireRate: 1500, 
                cost: 400,
                color: '#ff8800',
                icon: 'üí£'
            },
            ice: { 
                name: "Torre Glacial", 
                damage: 15, 
                range: 110, 
                fireRate: 1000, 
                cost: 250,
                color: '#00ffff',
                icon: '‚ùÑÔ∏è',
                slow: 0.5
            }
        };
        
        // Referencias a elementos del DOM
        const goldEl = document.getElementById('gold');
        const waveEl = document.getElementById('wave');
        const livesEl = document.getElementById('lives');
        const pointsEl = document.getElementById('points');
        const gemsEl = document.getElementById('gems');
        const enemyCountEl = document.getElementById('enemyCount');
        const nextWaveTimerEl = document.getElementById('nextWaveTimer');
        const waveProgressEl = document.getElementById('waveProgress');
        const waveStatusEl = document.getElementById('waveStatus');
        const canvas = document.getElementById('gameCanvas');
        const ctx = canvas.getContext('2d');
        const gridOverlay = document.getElementById('gridOverlay');
        const gameOverScreen = document.getElementById('gameOver');
        const buildHint = document.getElementById('buildHint');
        
        // ============================================
        // FUNCIONES PRINCIPALES CORREGIDAS
        // ============================================
        
        // 1. INICIALIZAR EL JUEGO
        function initGame() {
            console.log("Iniciando juego...");
            
            // Crear zonas de construcci√≥n
            createBuildZones();
            
            // Configurar eventos
            setupEventListeners();
            
            // Iniciar bucle del juego
            requestAnimationFrame(gameLoop);
            
            // Mostrar mensaje inicial
            waveStatusEl.textContent = "Selecciona una torre y haz clic en una zona verde para construir";
            waveStatusEl.style.color = "#00d4ff";
            
            alert("¬°Bienvenido a Kingdom Defense Pro! Selecciona una torre y haz clic en las zonas verdes para construir.");
        }
        
        // 2. CREAR ZONAS DE CONSTRUCCI√ìN (CORREGIDO)
        function createBuildZones() {
            console.log("Creando zonas de construcci√≥n...");
            gridOverlay.innerHTML = '';
            
            // Coordenadas de las zonas de construcci√≥n (en p√≠xeles)
            const buildZones = [
                // Fila superior
                {x: 80, y: 200, width: 40, height: 40},
                {x: 160, y: 200, width: 40, height: 40},
                {x: 240, y: 200, width: 40, height: 40},
                {x: 320, y: 200, width: 40, height: 40},
                
                // Fila media superior
                {x: 120, y: 240, width: 40, height: 40},
                {x: 200, y: 240, width: 40, height: 40},
                {x: 280, y: 240, width: 40, height: 40},
                
                // Fila media inferior
                {x: 120, y: 320, width: 40, height: 40},
                {x: 200, y: 320, width: 40, height: 40},
                {x: 280, y: 320, width: 40, height: 40},
                
                // Fila inferior
                {x: 80, y: 360, width: 40, height: 40},
                {x: 160, y: 360, width: 40, height: 40},
                {x: 240, y: 360, width: 40, height: 40},
                {x: 320, y: 360, width: 40, height: 40},
                
                // Columnas laterales
                {x: 40, y: 240, width: 40, height: 40},
                {x: 40, y: 280, width: 40, height: 40},
                {x: 40, y: 320, width: 40, height: 40},
                {x: 360, y: 240, width: 40, height: 40},
                {x: 360, y: 280, width: 40, height: 40},
                {x: 360, y: 320, width: 40, height: 40}
            ];
            
            // Crear celdas de construcci√≥n
            buildZones.forEach((zone, index) => {
                const cell = document.createElement('div');
                cell.className = 'grid-cell buildable';
                cell.id = `build-cell-${index}`;
                cell.style.width = `${zone.width}px`;
                cell.style.height = `${zone.height}px`;
                cell.style.left = `${zone.x}px`;
                cell.style.top = `${zone.y}px`;
                cell.style.pointerEvents = 'auto';
                cell.style.cursor = 'pointer';
                cell.style.zIndex = '10';
                
                // Evento de clic CORREGIDO
                cell.addEventListener('click', (e) => {
                    e.stopPropagation();
                    handleBuildClick(zone.x + 20, zone.y + 20); // Centro de la celda
                });
                
                // Evento hover para mostrar pista
                cell.addEventListener('mouseenter', () => {
                    if (selectedTower) {
                        const stats = towerStats[selectedTower];
                        buildHint.textContent = `Construir ${stats.name} (${stats.cost} oro)`;
                        buildHint.style.left = `${zone.x}px`;
                        buildHint.style.top = `${zone.y - 40}px`;
                        buildHint.style.display = 'block';
                    }
                });
                
                cell.addEventListener('mouseleave', () => {
                    buildHint.style.display = 'none';
                });
                
                gridOverlay.appendChild(cell);
            });
            
            console.log(`${buildZones.length} zonas de construcci√≥n creadas`);
        }
        
        // 3. MANEJAR CLIC PARA CONSTRUIR (CORREGIDO)
        function handleBuildClick(x, y) {
            console.log(`Clic en zona de construcci√≥n: ${x}, ${y}`);
            
            if (!selectedTower) {
                showMessage("¬°Selecciona una torre primero!", "error");
                return;
            }
            
            const stats = towerStats[selectedTower];
            
            // Verificar si hay suficiente oro
            if (gold < stats.cost) {
                showMessage(`No tienes suficiente oro. Necesitas ${stats.cost} oro`, "error");
                return;
            }
            
            // Verificar que no est√© en el camino
            if (isOnPath(x, y)) {
                showMessage("¬°No puedes construir en el camino!", "error");
                return;
            }
            
            // Verificar distancia m√≠nima de otras torres
            const tooClose = towers.some(tower => {
                const dx = tower.x - x;
                const dy = tower.y - y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                return distance < 50; // 50px de distancia m√≠nima
            });
            
            if (tooClose) {
                showMessage("¬°Muy cerca de otra torre!", "error");
                return;
            }
            
            // Construir la torre
            buildTower(selectedTower, x, y);
        }
        
        // 4. CONSTRUIR TORRE (CORREGIDO)
        function buildTower(type, x, y) {
            const stats = towerStats[type];
            
            // Restar oro
            gold -= stats.cost;
            
            // Crear objeto torre
            const tower = {
                type: type,
                x: x,
                y: y,
                damage: stats.damage,
                range: stats.range,
                fireRate: stats.fireRate,
                lastShot: 0,
                level: 1,
                color: stats.color,
                icon: stats.icon,
                cost: stats.cost,
                slow: stats.slow || 1
            };
            
            // Agregar a la lista
            towers.push(tower);
            
            // Actualizar UI
            updateUI();
            
            // Mostrar mensaje
            showMessage(`¬°Torre ${stats.name} construida por ${stats.cost} oro!`, "success");
            
            console.log(`Torre construida: ${type} en (${x}, ${y})`);
        }
        
        // 5. VERIFICAR SI EST√Å EN EL CAMINO
        function isOnPath(x, y) {
            // Definir el camino
            const path = [
                {x: 0, y: 120, width: 360, height: 40},    // Horizontal superior
                {x: 360, y: 120, width: 40, height: 320},  // Vertical derecha
                {x: 40, y: 440, width: 320, height: 40}    // Horizontal inferior
            ];
            
            // Verificar si el punto est√° dentro de alguna parte del camino
            return path.some(segment => 
                x >= segment.x && 
                x <= segment.x + segment.width && 
                y >= segment.y && 
                y <= segment.y + segment.height
            );
        }
        
        // 6. CONFIGURAR EVENT LISTENERS
        function setupEventListeners() {
            console.log("Configurando event listeners...");
            
            // Selecci√≥n de torres
            document.querySelectorAll('.tower-card').forEach(card => {
                card.addEventListener('click', function() {
                    // Remover selecci√≥n anterior
                    document.querySelectorAll('.tower-card').forEach(c => {
                        c.classList.remove('selected');
                    });
                    
                    // Agregar selecci√≥n actual
                    this.classList.add('selected');
                    selectedTower = this.dataset.tower;
                    
                    // Cambiar cursor
                    canvas.style.cursor = 'crosshair';
                    
                    // Mostrar mensaje
                    const stats = towerStats[selectedTower];
                    showMessage(`${stats.name} seleccionada (${stats.cost} oro)`, "info");
                });
            });
            
            // Bot√≥n de iniciar oleada
            document.getElementById('startWave').addEventListener('click', startWave);
            
            // Bot√≥n de mejorar todas
            document.getElementById('upgradeAll').addEventListener('click', upgradeAllTowers);
            
            // Bot√≥n de vender torre
            document.getElementById('sellTower').addEventListener('click', sellLastTower);
            
            // Bot√≥n de poder especial
            document.getElementById('specialPower').addEventListener('click', useSpecialPower);
            
            // Tienda
            document.getElementById('buyGold').addEventListener('click', () => buyItem('gold', 500, 5));
            document.getElementById('buyLives').addEventListener('click', () => buyItem('lives', 10, 8));
            document.getElementById('buyDamage').addEventListener('click', () => buyItem('damage', 0, 15));
            
            // Game over buttons
            document.getElementById('playAgain').addEventListener('click', resetGame);
            document.getElementById('continueGame').addEventListener('click', continueGame);
            document.getElementById('shareScore').addEventListener('click', shareScore);
            
            // Clic en el canvas (para construcci√≥n alternativa)
            canvas.addEventListener('click', (e) => {
                if (!selectedTower) return;
                
                const rect = canvas.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                
                // Solo construir en √°reas permitidas
                const buildZones = [
                    {x1: 40, y1: 200, x2: 400, y2: 400}, // √Årea general de construcci√≥n
                ];
                
                const isInBuildZone = buildZones.some(zone => 
                    x >= zone.x1 && x <= zone.x2 && y >= zone.y1 && y <= zone.y2
                );
                
                if (!isInBuildZone) {
                    showMessage("Solo puedes construir en las zonas verdes", "error");
                    return;
                }
                
                // Construir en la posici√≥n del clic
                handleBuildClick(x, y);
            });
            
            console.log("Event listeners configurados");
        }
        
        // 7. INICIAR OLEADA
        function startWave() {
            if (gameRunning) {
                showMessage("¬°Ya hay una oleada en progreso!", "error");
                return;
            }
            
            if (enemies.length > 0) {
                showMessage("¬°Termina los enemigos actuales primero!", "error");
                return;
            }
            
            gameRunning = true;
            waveStatusEl.textContent = `¬°Oleada ${wave} iniciada!`;
            waveStatusEl.style.color = "#ff6b00";
            
            // Calcular n√∫mero de enemigos
            enemiesThisWave = 5 + wave * 2;
            enemiesSpawned = 0;
            
            // Iniciar spawn de enemigos
            enemySpawnInterval = setInterval(() => {
                if (enemiesSpawned < enemiesThisWave) {
                    spawnEnemy();
                    enemiesSpawned++;
                } else {
                    clearInterval(enemySpawnInterval);
                }
            }, 1000);
            
            showMessage(`¬°Oleada ${wave} iniciada! ${enemiesThisWave} enemigos se acercan`, "warning");
        }
        
        // 8. CREAR ENEMIGO
        function spawnEnemy() {
            const baseHealth = 50 + (wave - 1) * 20;
            const baseSpeed = 1 + wave * 0.1;
            const baseBounty = 10 + wave * 5;
            
            // Tipos de enemigos seg√∫n oleada
            let type = 'normal';
            let color = 'red';
            let size = 15;
            
            if (wave >= 5) {
                type = 'elite';
                color = 'purple';
                size = 20;
            }
            
            if (wave >= 8) {
                type = 'boss';
                color = 'orange';
                size = 25;
            }
            
            const enemy = {
                x: -30,
                y: 140,
                width: 30,
                height: 30,
                health: type === 'elite' ? baseHealth * 1.5 : type === 'boss' ? baseHealth * 3 : baseHealth,
                maxHealth: type === 'elite' ? baseHealth * 1.5 : type === 'boss' ? baseHealth * 3 : baseHealth,
                speed: type === 'boss' ? baseSpeed * 0.7 : baseSpeed,
                bounty: type === 'elite' ? baseBounty * 2 : type === 'boss' ? baseBounty * 5 : baseBounty,
                type: type,
                color: color,
                size: size,
                pathIndex: 0,
                path: [
                    {x: 0, y: 140},   // Inicio
                    {x: 350, y: 140}, // Giro derecho
                    {x: 350, y: 430}, // Bajada
                    {x: 50, y: 430},  // Giro izquierda
                    {x: 50, y: 470}   // Fin (salida)
                ]
            };
            
            enemies.push(enemy);
        }
        
        // 9. ACTUALIZAR TORRES (DISPARAR)
        function updateTowers(currentTime) {
            towers.forEach(tower => {
                // Buscar enemigo en rango
                let target = null;
                let closestDistance = tower.range;
                
                enemies.forEach(enemy => {
                    const dx = tower.x - enemy.x;
                    const dy = tower.y - enemy.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < closestDistance) {
                        closestDistance = distance;
                        target = enemy;
                    }
                });
                
                // Disparar si hay objetivo y ha pasado el tiempo de recarga
                if (target && currentTime - tower.lastShot > tower.fireRate) {
                    // Calcular da√±o (con boost si est√° activo)
                    let damage = tower.damage;
                    if (damageBoostActive) {
                        damage *= 2;
                    }
                    
                    // Crear bala
                    bullets.push({
                        x: tower.x,
                        y: tower.y,
                        target: target,
                        damage: damage,
                        color: tower.color,
                        type: tower.type,
                        slow: tower.slow
                    });
                    
                    // Actualizar √∫ltimo disparo
                    tower.lastShot = currentTime;
                }
            });
        }
        
        // 10. ACTUALIZAR ELEMENTOS DEL JUEGO
        function updateGameElements() {
            // Mover enemigos por el camino
            enemies.forEach((enemy, index) => {
                if (enemy.pathIndex < enemy.path.length - 1) {
                    const target = enemy.path[enemy.pathIndex + 1];
                    const dx = target.x - enemy.x;
                    const dy = target.y - enemy.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    
                    if (distance < enemy.speed) {
                        enemy.pathIndex++;
                        enemy.x = target.x;
                        enemy.y = target.y;
                    } else {
                        enemy.x += (dx / distance) * enemy.speed;
                        enemy.y += (dy / distance) * enemy.speed;
                    }
                } else {
                    // Enemigo lleg√≥ al final
                    lives--;
                    enemies.splice(index, 1);
                    
                    if (lives <= 0) {
                        gameOver();
                    }
                    
                    updateUI();
                }
            });
            
            // Mover y verificar balas
            bullets.forEach((bullet, index) => {
                if (!bullet.target || bullet.target.health <= 0) {
                    bullets.splice(index, 1);
                    return;
                }
                
                const dx = bullet.target.x - bullet.x;
                const dy = bullet.target.y - bullet.y;
                const distance = Math.sqrt(dx * dx + dy * dy);
                
                if (distance < 10) {
                    // Impacto
                    bullet.target.health -= bullet.damage;
                    
                    // Efecto de ralentizaci√≥n para torre de hielo
                    if (bullet.type === 'ice') {
                        bullet.target.speed *= bullet.slow;
                    }
                    
                    // Verificar si el enemigo muri√≥
                    if (bullet.target.health <= 0) {
                        // Recompensas
                        gold += bullet.target.bounty;
                        points += bullet.target.type === 'elite' ? 25 : bullet.target.type === 'boss' ? 50 : 10;
                        enemyKills++;
                        
                        // Eliminar enemigo
                        const enemyIndex = enemies.indexOf(bullet.target);
                        if (enemyIndex !== -1) {
                            enemies.splice(enemyIndex, 1);
                        }
                    }
                    
                    // Eliminar bala
                    bullets.splice(index, 1);
                } else {
                    // Mover bala hacia el objetivo
                    bullet.x += (dx / distance) * 10;
                    bullet.y += (dy / distance) * 10;
                }
            });
            
            // Verificar si la oleada termin√≥
            if (gameRunning && enemies.length === 0 && enemiesSpawned >= enemiesThisWave) {
                endWave();
            }
        }
        
        // 11. FINALIZAR OLEADA
        function endWave() {
            gameRunning = false;
            
            // Recompensas por completar oleada
            const waveReward = wave * 100;
            points += waveReward;
            gold += wave * 50;
            gems += 2;
            
            // Verificar si gan√≥ el juego
            if (wave >= maxWaves) {
                victory();
                return;
            }
            
            // Preparar siguiente oleada
            wave++;
            waveTimer = 15; // 15 segundos para prepararse
            
            showMessage(`¬°Oleada completada! Recompensa: +${waveReward} puntos, +${wave * 50} oro, +2 gemas`, "success");
            waveStatusEl.textContent = `¬°Oleada ${wave-1} completada! Siguiente oleada en ${waveTimer} segundos`;
            waveStatusEl.style.color = "#00ff00";
            
            updateUI();
        }
        
        // 12. DIBUJAR ELEMENTOS
        function drawGameElements() {
            // Limpiar canvas
            ctx.clearRect(0, 0, canvas.width, canvas.height);
            
            // Dibujar camino
            drawPath();
            
            // Dibujar torres
            drawTowers();
            
            // Dibujar enemigos
            drawEnemies();
            
            // Dibujar balas
            drawBullets();
            
            // Dibujar boost de da√±o activo
            if (damageBoostActive) {
                const timeLeft = Math.ceil((damageBoostEndTime - Date.now()) / 1000);
                if (timeLeft > 0) {
                    ctx.fillStyle = 'rgba(255, 215, 0, 0.7)';
                    ctx.font = 'bold 16px Arial';
                    ctx.textAlign = 'center';
                    ctx.fillText(`‚ö° x2 DA√ëO (${timeLeft}s)`, canvas.width / 2, 30);
                } else {
                    damageBoostActive = false;
                }
            }
        }
        
        function drawPath() {
            // Camino principal
            ctx.fillStyle = '#8B4513';
            ctx.fillRect(0, 120, 360, 40);   // Horizontal superior
            ctx.fillRect(360, 120, 40, 320); // Vertical derecha
            ctx.fillRect(40, 440, 320, 40);  // Horizontal inferior
            
            // Bordes del camino
            ctx.strokeStyle = '#654321';
            ctx.lineWidth = 3;
            ctx.strokeRect(0, 120, 360, 40);
            ctx.strokeRect(360, 120, 40, 320);
            ctx.strokeRect(40, 440, 320, 40);
            
            // Marcadores de camino
            ctx.strokeStyle = '#DEB887';
            ctx.lineWidth = 2;
            ctx.setLineDash([10, 10]);
            
            // L√≠nea central del camino
            ctx.beginPath();
            ctx.moveTo(0, 140);
            ctx.lineTo(360, 140);
            ctx.moveTo(380, 120);
            ctx.lineTo(380, 440);
            ctx.moveTo(40, 460);
            ctx.lineTo(360, 460);
            ctx.stroke();
            
            ctx.setLineDash([]);
        }
        
        function drawTowers() {
            towers.forEach(tower => {
                // Base de la torre
                ctx.fillStyle = tower.color;
                ctx.beginPath();
                ctx.arc(tower.x, tower.y, 20, 0, Math.PI * 2);
                ctx.fill();
                
                // Borde
                ctx.strokeStyle = '#ffffff';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Detalles
                ctx.fillStyle = 'rgba(0, 0, 0, 0.5)';
                ctx.beginPath();
                ctx.arc(tower.x, tower.y, 15, 0, Math.PI * 2);
                ctx.fill();
                
                // Icono
                ctx.font = '20px Arial';
                ctx.textAlign = 'center';
                ctx.textBaseline = 'middle';
                ctx.fillText(tower.icon, tower.x, tower.y);
                
                // Nivel
                ctx.fillStyle = 'white';
                ctx.font = 'bold 12px Arial';
                ctx.fillText(`Lv${tower.level}`, tower.x, tower.y + 30);
            });
        }
        
        function drawEnemies() {
            enemies.forEach(enemy => {
                // Cuerpo del enemigo
                ctx.fillStyle = enemy.color;
                ctx.beginPath();
                ctx.arc(enemy.x, enemy.y, enemy.size, 0, Math.PI * 2);
                ctx.fill();
                
                // Borde
                ctx.strokeStyle = '#000000';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // Ojos (para darle personalidad)
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.arc(enemy.x - 5, enemy.y - 3, 3, 0, Math.PI * 2);
                ctx.arc(enemy.x + 5, enemy.y - 3, 3, 0, Math.PI * 2);
                ctx.fill();
                
                ctx.fillStyle = 'black';
                ctx.beginPath();
                ctx.arc(enemy.x - 5, enemy.y - 3, 1.5, 0, Math.PI * 2);
                ctx.arc(enemy.x + 5, enemy.y - 3, 1.5, 0, Math.PI * 2);
                ctx.fill();
                
                // Barra de vida
                const healthPercent = enemy.health / enemy.maxHealth;
                const barWidth = 30;
                const barHeight = 5;
                const barX = enemy.x - barWidth / 2;
                const barY = enemy.y - enemy.size - 10;
                
                // Fondo de la barra
                ctx.fillStyle = 'red';
                ctx.fillRect(barX, barY, barWidth, barHeight);
                
                // Vida actual
                ctx.fillStyle = 'lime';
                ctx.fillRect(barX, barY, barWidth * healthPercent, barHeight);
                
                // Borde de la barra
                ctx.strokeStyle = '#000000';
                ctx.lineWidth = 1;
                ctx.strokeRect(barX, barY, barWidth, barHeight);
            });
        }
        
        function drawBullets() {
            bullets.forEach(bullet => {
                // Cuerpo de la bala
                ctx.fillStyle = bullet.color;
                ctx.beginPath();
                ctx.arc(bullet.x, bullet.y, 5, 0, Math.PI * 2);
                ctx.fill();
                
                // Destello
                ctx.fillStyle = 'white';
                ctx.beginPath();
                ctx.arc(bullet.x - 1, bullet.y - 1, 2, 0, Math.PI * 2);
                ctx.fill();
                
                // Estela (para balas de hielo)
                if (bullet.type === 'ice') {
                    ctx.strokeStyle = 'rgba(0, 255, 255, 0.3)';
                    ctx.lineWidth = 2;
                    ctx.beginPath();
                    ctx.moveTo(bullet.x, bullet.y);
                    
                    // Calcular direcci√≥n opuesta al movimiento
                    const dx = bullet.target.x - bullet.x;
                    const dy = bullet.target.y - bullet.y;
                    const distance = Math.sqrt(dx * dx + dy * dy);
                    const trailLength = 10;
                    
                    ctx.lineTo(
                        bullet.x - (dx / distance) * trailLength,
                        bullet.y - (dy / distance) * trailLength
                    );
                    ctx.stroke();
                }
            });
        }
        
        // 13. ACTUALIZAR INTERFAZ
        function updateUI() {
            goldEl.textContent = gold;
            waveEl.textContent = wave;
            livesEl.textContent = lives;
            pointsEl.textContent = points;
            gemsEl.textContent = gems;
            enemyCountEl.textContent = enemies.length;
            
            // Actualizar progreso de oleada
            const progress = ((wave - 1) / maxWaves) * 100;
            waveProgressEl.style.width = `${progress}%`;
            
            // Actualizar temporizador entre oleadas
            if (waveTimer > 0) {
                nextWaveTimerEl.textContent = waveTimer;
            } else {
                nextWaveTimerEl.textContent = '--';
            }
            
            // Actualizar boost de da√±o
            if (damageBoostActive && Date.now() > damageBoostEndTime) {
                damageBoostActive = false;
                showMessage('El boost de da√±o ha terminado', "info");
            }
        }
        
        // 14. FUNCIONES AUXILIARES
        function showMessage(text, type = "info") {
            waveStatusEl.textContent = text;
            
            // Colores seg√∫n tipo de mensaje
            const colors = {
                info: "#00d4ff",
                success: "#00ff00",
                warning: "#ffaa00",
                error: "#ff4444"
            };
            
            waveStatusEl.style.color = colors[type] || colors.info;
            
            // Auto-ocultar despu√©s de 3 segundos (excepto errores)
            if (type !== "error") {
                setTimeout(() => {
                    if (!gameRunning && waveTimer <= 0) {
                        waveStatusEl.textContent = "Selecciona una torre y haz clic en una zona verde para construir";
                        waveStatusEl.style.color = "#00d4ff";
                    }
                }, 3000);
            }
        }
        
        function upgradeAllTowers() {
            if (gold < 200) {
                showMessage("No tienes suficiente oro. Necesitas 200 oro", "error");
                return;
            }
            
            if (towers.length === 0) {
                showMessage("No tienes torres para mejorar", "error");
                return;
            }
            
            gold -= 200;
            
            towers.forEach(tower => {
                tower.damage *= 1.5;
                tower.range *= 1.1;
                tower.fireRate *= 0.9; // Dispara m√°s r√°pido
                tower.level++;
            });
            
            updateUI();
            showMessage("¬°Todas las torres mejoradas! +50% da√±o, +10% alcance, +10% velocidad", "success");
        }
        
        function sellLastTower() {
            if (towers.length === 0) {
                showMessage("No tienes torres para vender", "error");
                return;
            }
            
            const lastTower = towers.pop();
            const refund = Math.floor(lastTower.cost * 0.75);
            gold += refund;
            
            updateUI();
            showMessage(`Torre vendida por ${refund} oro (75% del costo)`, "info");
        }
        
        function useSpecialPower() {
            if (gems < 10) {
                showMessage("No tienes suficientes gemas. Necesitas 10 gemas", "error");
                return;
            }
            
            gems -= 10;
            
            // Eliminar todos los enemigos actuales
            let totalBounty = 0;
            enemies.forEach(enemy => {
                totalBounty += enemy.bounty;
                enemyKills++;
            });
            
            gold += totalBounty;
            enemies = [];
            
            updateUI();
            showMessage(`¬°Poder especial activado! +${totalBounty} oro`, "success");
        }
        
        function buyItem(type, amount, cost) {
            if (gems < cost) {
                showMessage(`No tienes suficientes gemas. Necesitas ${cost} gemas`, "error");
                return;
            }
            
            gems -= cost;
            
            switch (type) {
                case 'gold':
                    gold += amount;
                    showMessage(`+${amount} oro comprado`, "success");
                    break;
                    
                case 'lives':
                    lives += amount;
                    showMessage(`+${amount} vidas compradas`, "success");
                    break;
                    
                case 'damage':
                    damageBoostActive = true;
                    damageBoostEndTime = Date.now() + 30000; // 30 segundos
                    showMessage("¬°Boost de x2 da√±o activado por 30 segundos!", "success");
                    break;
            }
            
            updateUI();
        }
        
        // 15. FUNCIONES DE FIN DE JUEGO
        function victory() {
            gameRunning = false;
            
            document.getElementById('gameOverTitle').textContent = 'üèÜ ¬°VICTORIA!';
            document.getElementById('victoryIcon').textContent = 'üëë';
            document.getElementById('gameOverMessage').textContent = `¬°Has completado todas las ${maxWaves} oleadas!`;
            document.getElementById('finalScore').textContent = `${points} Puntos`;
            document.getElementById('finalWaves').textContent = wave - 1;
            document.getElementById('finalTowers').textContent = towers.length;
            document.getElementById('finalEnemies').textContent = enemyKills;
            
            gameOverScreen.style.display = 'flex';
        }
        
        function gameOver() {
            gameRunning = false;
            
            document.getElementById('gameOverTitle').textContent = 'üíÄ GAME OVER';
            document.getElementById('victoryIcon').textContent = 'üò¢';
            document.getElementById('gameOverMessage').textContent = 'Los enemigos han invadido tu reino';
            document.getElementById('finalScore').textContent = `${points} Puntos`;
            document.getElementById('finalWaves').textContent = wave;
            document.getElementById('finalTowers').textContent = towers.length;
            document.getElementById('finalEnemies').textContent = enemyKills;
            
            gameOverScreen.style.display = 'flex';
        }
        
        function resetGame() {
            gold = 1000;
            wave = 1;
            lives = 30;
            points = 0;
            gems = 50;
            towers = [];
            enemies = [];
            bullets = [];
            enemyKills = 0;
            gameRunning = false;
            selectedTower = null;
            damageBoostActive = false;
            waveTimer = 0;
            
            if (enemySpawnInterval) {
                clearInterval(enemySpawnInterval);
            }
            
            gameOverScreen.style.display = 'none';
            updateUI();
            createBuildZones();
            
            showMessage("¬°Juego reiniciado! Selecciona una torre para comenzar", "info");
        }
        
        function continueGame() {
            maxWaves = 20;
            gameOverScreen.style.display = 'none';
            showMessage("¬°Modo extendido activado! Sobrevive hasta la oleada 20", "success");
        }
        
        function shareScore() {
            const shareText = `¬°Consegu√≠ ${points} puntos en Kingdom Defense Pro! ¬øPuedes superarme?`;
            
            if (navigator.share) {
                navigator.share({
                    title: 'Kingdom Defense Pro',
                    text: shareText,
                    url: window.location.href
                });
            } else {
                // Fallback para navegadores que no soportan Web Share API
                navigator.clipboard.writeText(shareText).then(() => {
                    alert("¬°Puntaje copiado al portapapeles! Comp√°rtelo donde quieras.");
                });
            }
        }
        
        // 16. BUCLE PRINCIPAL DEL JUEGO
        function gameLoop(currentTime) {
            if (!lastTime) lastTime = currentTime;
            const deltaTime = currentTime - lastTime;
            lastTime = currentTime;
            
            // Actualizar temporizador entre oleadas
            if (waveTimer > 0 && !gameRunning) {
                waveTimer -= deltaTime / 1000;
                if (waveTimer <= 0) {
                    waveTimer = 0;
                    waveStatusEl.textContent = "¬°Preparado! Haz clic en 'Iniciar Oleada'";
                }
                nextWaveTimerEl.textContent = Math.ceil(waveTimer);
            }
            
            // Actualizar elementos del juego
            updateTowers(currentTime);
            updateGameElements();
            
            // Dibujar todo
            drawGameElements();
            
            // Continuar el bucle
            requestAnimationFrame(gameLoop);
        }
        
        // 17. INICIAR EL JUEGO CUANDO EL DOCUMENTO EST√â LISTO
        document.addEventListener('DOMContentLoaded', initGame);
        
        // 18. TELEMETR√çA PARA DEPURACI√ìN
        console.log("Kingdom Defense Pro - C√≥digo cargado correctamente");
        console.log("Instrucciones:");
        console.log("1. Selecciona una torre del panel derecho");
        console.log("2. Haz clic en una zona verde del mapa para construir");
        console.log("3. Haz clic en 'Iniciar Oleada' para comenzar");
        console.log("4. Usa las gemas para comprar mejoras en la tienda");
    </script>
</body>
</html>